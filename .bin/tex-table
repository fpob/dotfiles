#!/usr/bin/env python3

import click

@click.command()
@click.argument("file", type=click.File("r"))
@click.option("-s", "--separator", default="\t")
@click.option("-t", "--transpose", is_flag=True, default=False)
@click.option("-f", "--column-format", default="%s")
def tex_table(file, separator, transpose, column_format):
    table = list()
    for i, line in enumerate(file):
        table.append([column_format % cell for cell in line.strip().split(separator)])
    if transpose:
        table = list(zip(*table))
    click.echo(r"\begin{tabular}{" + "c" * len(table[0]) + "}")
    for row in table:
        click.echo("  " + " & ".join(row) + r" \\")
    click.echo(r"\end{tabular}")

if __name__ == "__main__":
    tex_table()
