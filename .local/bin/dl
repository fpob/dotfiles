#!/usr/bin/env bash

mega () {
    local base='https://mega.nz/'
    if (echo $1 | grep -q '^mega:') ; then
        megadl "$(echo $1 | sed -re "s|^mega:|$base|")"
    elif (echo $1 | grep -q '^#!') ; then
        megadl "$base$1"
    else
        megadl "$1"
    fi
}

sunsub () {
    curl --user 'sunsub:*tvrdojadernych#' -gOJ "$1"
}

web () {
    wget --random-wait -r -p -nH -e robots=off -U mozilla --cut-dirs="${2:-0}" \
        --no-parent --content-disposition "$1"
}

youtube () {
    youtube-dl --prefer-ffmpeg --merge-output-format mkv -f bestvideo+bestaudio "$1"
}

if [[ -n "$2" ]] ; then
    $1 "$2"
else
    while read url ; do
        $1 "$url"
    done
fi
