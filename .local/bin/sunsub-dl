#!/usr/bin/env bash

if [[ $1 = '--help' ]] ; then
    cat <<EOF
Použití: `basename $0` URL
         `basename $0` < seznam-url.txt

Stáhne zadaný soubor ze Sunsubu nebo seznam souborů zadaných na standardním
vstupu, jeden odkaz na jeden řádek.
EOF
    exit
fi

sunsub_dl () {
    curl --user 'sunsub:*tvrdojadernych#' -gOJ "$1"
}

if [[ "$1" ]] ; then
    sunsub_dl "$1"
else
    while read url ; do
        echo "`tput bold`$url`tput sgr0`"
        sunsub_dl "$url"
        echo
    done
fi
