[tox]
envlist = py3,mypy,flake8
isolated_build = True


[testenv]
deps =
    pytest
    pytest-mock
commands = pytest {posargs:tests}

[pytest]
addopts = -ra -v


[testenv:mypy]
deps =
    mypy
commands = mypy --config-file tox.ini src

[mypy]
ignore_missing_imports = True
check_untyped_defs = True
namespace_packages = True
install_types = True
non_interactive = True


[testenv:flake8]
deps =
    flake8
    flake8-bugbear
    flake8-isort
commands = flake8 src tests

[flake8]
max-line-length = 80
select = C,E,F,W,B,B950,I
ignore = W503,E501

[isort]
lines_after_imports = 2
line_length = 88
